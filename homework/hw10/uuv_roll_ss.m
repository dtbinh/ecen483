% Simulation of UUV for class discussion of state-space control.% Assumes full-state feedback (no estimator).  Reference input% included.J = 45;m = 200;g = 9.81;L = 0.02;b = 5;tfinal = 10;F = [-b/J -m*g*L/J; 1 0];G = [1/J; 0];H = [0 1];  J = 0;sysOL = ss(F,G,H,J);P = [-1.2-1.8j -1.2+1.8j];K = place(F,G,P)NN = inv([F G; H J])*[0; 0; 1]Nx = NN(1:2)Nu = NN(3)Nbar = Nu + K*NxFCL = F-G*KGCL = G*NbarsysCL = ss(FCL,GCL,H,J);[yCL,t,xCL] = step(sysCL,tfinal);uCL = -K*xCL' + Nbar*ones(size(t))';figure(1); clf;subplot(211); plot(t,yCL); grid;title('UUV Roll Response, Full-State Feedback');xlabel('time (sec)');ylabel('roll angle (rad)');subplot(212); plot(t,uCL); grid;xlabel('time (sec)');ylabel('control effort (N-m)');